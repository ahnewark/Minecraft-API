{% extends "base.html" %}

{% block content %}

<div class="oneColeDiv">
  <h1>Profile</h1>
  <p>Player name: {{user.user}}</p>
  <p>E-mail: {{user.email}}</p>
  <a href="/changepass.jsp">Click here to change your password.</a>
  <h2>Change Your Skin</h2>
  <p>Start by <a href="/char.png">downloading the reference skin</a>.</p>
  <img src="/char.png" style="float:left" />
  <p>Edit in your favorite image editing tool and save it as a png image. Make sure you keep the same image dimensions as the original.</p>
  <p>When you're happy with the changes, upload the new image here:</p>
  {% if error %}
    <p style="color: red">{{error}}</p>
  {% endif %}
  <script type="text/javascript">
    function removeCloak() {
        var xhr = new XMLHttpRequest();
        xhr.open('get', window.location.protocol + "//" + window.location.host + '/mineonline/removecloak.jsp?sessionId={{user['sessionId']}}', true);
        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
        xhr.send();
        location.reload();
    }
  </script>

  <form action="/profile/" method="post" enctype="multipart/form-data">
      Skin:<br/>
      <div style="height: 64px;">
        <img src="/mineonline/player/{{user.uuid}}/skin" width="64" onerror="this.style.opacity='0'" style="float:left;" /><input type="file" id="file" name="file">
      </div>
      <br/><br/>
      Cloak:<br/>
      <img src="/mineonline/player/{{user.uuid}}/cloak" width="64" height="32" onerror="this.style.opacity='0'" style="float:left;" /><input type="file" id="cloak" name="cloak"> <button type="button" onclick="removeCloak()">Remove</button><br/><br/>
      Model:<br/>
      <select name="slim" id="slim">
        <option value="false" {% if not user["slim"] %}selected{% endif %}>Steve</option>
        <option value="true" {% if user["slim"] %}selected{% endif %}>Alex</option>
        </select>
      <br/><br/>
      <button>Submit</button>
  </form>
  <br/><br/>
</div>

{% endblock %}